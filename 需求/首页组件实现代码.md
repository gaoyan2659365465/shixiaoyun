# 首页组件完整实现代码

## 目录
1. [SearchBar 组件](#searchbar-组件)
2. [BannerSwiper 组件](#bannerswiper-组件)
3. [QuickEntry 组件](#quickentry-组件)
4. [SectionTitle 组件](#sectiontitle-组件)
5. [ActivityCard 组件](#activitycard-组件)
6. [首页主文件](#首页主文件)
7. [数据模型文件](#数据模型文件)
8. [API接口文件](#api接口文件)
9. [样式变量文件](#样式变量文件)

---

## SearchBar 组件

**文件**: `pages/index/components/SearchBar.vue`

```vue
<template>
  <view class="search-bar-container">
    <view class="search-bar" @click="handleClick">
      <uni-icons type="search" size="16" color="#a7abb2"></uni-icons>
      <text class="placeholder">{{ placeholder }}</text>
    </view>
  </view>
</template>

<script>
export default {
  name: 'SearchBar',
  props: {
    placeholder: {
      type: String,
      default: 'Search'
    }
  },
  methods: {
    handleClick() {
      this.$emit('click')
    }
  }
}
</script>

<style lang="scss" scoped>
.search-bar-container {
  padding: 24rpx 32rpx;
  background-color: #F5F6FA;
}

.search-bar {
  height: 56rpx;
  background-color: #FFFFFF;
  border-radius: 16rpx;
  padding: 0 24rpx;
  display: flex;
  align-items: center;
  
  .placeholder {
    margin-left: 16rpx;
    font-size: 28rpx;
    color: #a7abb2;
    line-height: 40rpx;
  }
}
</style>
```

---

## BannerSwiper 组件

**文件**: `pages/index/components/BannerSwiper.vue`

```vue
<template>
  <view class="banner-swiper-container">
    <swiper 
      class="banner-swiper"
      :autoplay="autoplay"
      :interval="interval"
      :duration="duration"
      :indicator-dots="true"
      indicator-color="rgba(255,255,255,0.5)"
      indicator-active-color="#FFFFFF"
      @change="handleChange"
    >
      <swiper-item 
        v-for="(banner, index) in banners" 
        :key="banner.id"
        @click="handleClick(banner, index)"
      >
        <view class="banner-item">
          <image 
            :src="banner.image" 
            mode="aspectFill"
            class="banner-image"
          ></image>
          <view class="banner-content">
            <text class="banner-title">{{ banner.title }}</text>
            <text class="banner-subtitle">{{ banner.subtitle }}</text>
          </view>
        </view>
      </swiper-item>
    </swiper>
  </view>
</template>

<script>
export default {
  name: 'BannerSwiper',
  props: {
    banners: {
      type: Array,
      required: true,
      default: () => []
    },
    autoplay: {
      type: Boolean,
      default: true
    },
    interval: {
      type: Number,
      default: 3000
    },
    duration: {
      type: Number,
      default: 500
    }
  },
  data() {
    return {
      currentIndex: 0
    }
  },
  methods: {
    handleChange(e) {
      this.currentIndex = e.detail.current
    },
    handleClick(banner, index) {
      this.$emit('click', { banner, index })
    }
  }
}
</script>

<style lang="scss" scoped>
.banner-swiper-container {
  padding: 0 32rpx 24rpx;
}

.banner-swiper {
  height: 280rpx;
  border-radius: 16rpx;
  overflow: hidden;
}

.banner-item {
  width: 100%;
  height: 100%;
  position: relative;
}

.banner-image {
  width: 100%;
  height: 100%;
  display: block;
}

.banner-content {
  position: absolute;
  left: 0;
  bottom: 0;
  right: 0;
  padding: 24rpx;
  background: linear-gradient(to top, rgba(0,0,0,0.6), transparent);
  
  .banner-title {
    display: block;
    font-size: 36rpx;
    font-weight: 600;
    color: #FFFFFF;
    line-height: 52rpx;
    margin-bottom: 8rpx;
  }
  
  .banner-subtitle {
    display: block;
    font-size: 24rpx;
    color: rgba(255,255,255,0.8);
    line-height: 32rpx;
  }
}
</style>
```

---

## QuickEntry 组件

**文件**: `pages/index/components/QuickEntry.vue`

```vue
<template>
  <view class="quick-entry-container">
    <view class="entry-grid">
      <view 
        v-for="entry in entries" 
        :key="entry.id"
        class="entry-item"
        @click="handleClick(entry)"
      >
        <view class="icon-wrapper">
          <image :src="entry.icon" class="icon" mode="aspectFit"></image>
          <view v-if="entry.badge" class="badge">{{ entry.badge }}</view>
        </view>
        <text class="title">{{ entry.title }}</text>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  name: 'QuickEntry',
  props: {
    entries: {
      type: Array,
      required: true,
      default: () => []
    }
  },
  methods: {
    handleClick(entry) {
      this.$emit('click', entry)
    }
  }
}
</script>

<style lang="scss" scoped>
.quick-entry-container {
  padding: 32rpx;
}

.entry-grid {
  display: flex;
  justify-content: space-around;
  align-items: flex-start;
}

.entry-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  
  &:active {
    opacity: 0.7;
  }
}

.icon-wrapper {
  width: 120rpx;
  height: 120rpx;
  border-radius: 50%;
  background-color: #FFFFFF;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);
  position: relative;
  margin-bottom: 16rpx;
}

.icon {
  width: 64rpx;
  height: 64rpx;
}

.badge {
  position: absolute;
  top: -4rpx;
  right: -4rpx;
  min-width: 32rpx;
  height: 32rpx;
  padding: 0 8rpx;
  background-color: #f34545;
  color: #FFFFFF;
  font-size: 20rpx;
  line-height: 32rpx;
  text-align: center;
  border-radius: 16rpx;
  border: 2rpx solid #FFFFFF;
}

.title {
  font-size: 24rpx;
  color: #656a73;
  line-height: 32rpx;
  text-align: center;
}
</style>
```

---

## SectionTitle 组件

**文件**: `pages/index/components/SectionTitle.vue`

```vue
<template>
  <view class="section-title" @click="handleClick">
    <view class="left">
      <text class="title">{{ title }}</text>
      <text v-if="subtitle" class="subtitle">{{ subtitle }}</text>
    </view>
    <view v-if="showArrow" class="right">
      <uni-icons type="right" size="16" color="#a7abb2"></uni-icons>
    </view>
  </view>
</template>

<script>
export default {
  name: 'SectionTitle',
  props: {
    title: {
      type: String,
      required: true
    },
    subtitle: {
      type: String,
      default: ''
    },
    showArrow: {
      type: Boolean,
      default: true
    }
  },
  methods: {
    handleClick() {
      if (this.showArrow) {
        this.$emit('click')
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.section-title {
  height: 88rpx;
  padding: 0 32rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
  
  &:active {
    opacity: 0.7;
  }
}

.left {
  display: flex;
  align-items: baseline;
  
  .title {
    font-size: 32rpx;
    font-weight: 500;
    color: #17171a;
    line-height: 44rpx;
  }
  
  .subtitle {
    margin-left: 16rpx;
    font-size: 24rpx;
    color: #a7abb2;
    line-height: 32rpx;
  }
}

.right {
  display: flex;
  align-items: center;
}
</style>
```

---

## ActivityCard 组件

**文件**: `pages/index/components/ActivityCard.vue`

```vue
<template>
  <view class="activity-card" @click="handleCardClick">
    <image 
      :src="activity.image" 
      mode="aspectFill"
      class="activity-image"
    ></image>
    
    <view class="activity-content">
      <text class="activity-title">{{ activity.title }}</text>
      
      <view class="activity-time">
        <uni-icons type="calendar" size="12" color="#a7abb2"></uni-icons>
        <text class="time-text">
          {{ activity.startDate }}-{{ activity.endDate }}
        </text>
      </view>
      
      <view class="activity-footer">
        <text v-if="activity.participants" class="participants">
          {{ activity.participants }}/{{ activity.maxParticipants }}人
        </text>
        
        <view 
          :class="['action-button', activity.status]"
          @click.stop="handleButtonClick"
        >
          <text class="button-text">{{ buttonText }}</text>
        </view>
      </view>
    </view>
  </view>
</template>

<script>
export default {
  name: 'ActivityCard',
  props: {
    activity: {
      type: Object,
      required: true,
      default: () => ({})
    }
  },
  computed: {
    buttonText() {
      const statusMap = {
        'ongoing': '报名参加',
        'upcoming': '即将开始',
        'ended': '已结束'
      }
      return statusMap[this.activity.status] || '报名参加'
    }
  },
  methods: {
    handleCardClick() {
      this.$emit('click-card', this.activity)
    },
    handleButtonClick() {
      if (this.activity.status !== 'ended') {
        this.$emit('click-button', this.activity)
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.activity-card {
  background-color: #FFFFFF;
  border-radius: 16rpx;
  margin: 0 32rpx 24rpx;
  overflow: hidden;
  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.06);
  
  &:active {
    opacity: 0.95;
  }
}

.activity-image {
  width: 100%;
  height: 400rpx;
  display: block;
}

.activity-content {
  padding: 24rpx;
}

.activity-title {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
  font-size: 36rpx;
  font-weight: 500;
  color: #17171a;
  line-height: 52rpx;
}

.activity-time {
  display: flex;
  align-items: center;
  margin-top: 16rpx;
  
  .time-text {
    margin-left: 8rpx;
    font-size: 24rpx;
    color: #a7abb2;
    line-height: 32rpx;
  }
}

.activity-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 24rpx;
}

.participants {
  font-size: 24rpx;
  color: #656a73;
  line-height: 32rpx;
}

.action-button {
  height: 64rpx;
  min-width: 160rpx;
  padding: 0 32rpx;
  border-radius: 32rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  
  &.ongoing {
    background-color: #17171a;
    
    .button-text {
      color: #FFFFFF;
    }
  }
  
  &.upcoming {
    background-color: #4458ff;
    
    .button-text {
      color: #FFFFFF;
    }
  }
  
  &.ended {
    background-color: #E5E6EA;
    
    .button-text {
      color: #a7abb2;
    }
  }
  
  &:active:not(.ended) {
    opacity: 0.8;
  }
}

.button-text {
  font-size: 28rpx;
  font-weight: 500;
  line-height: 40rpx;
}
</style>
```

---

## 首页主文件

**文件**: `pages/index/index.vue`

```vue
<template>
  <view class="home-page">
    <!-- 搜索框 -->
    <SearchBar 
      placeholder="Search" 
      @click="handleSearch" 
    />
    
    <!-- 轮播横幅 -->
    <BannerSwiper 
      v-if="banners.length > 0"
      :banners="banners" 
      @click="handleBannerClick" 
    />
    
    <!-- 快捷入口 -->
    <QuickEntry 
      v-if="quickEntries.length > 0"
      :entries="quickEntries" 
      @click="handleEntryClick" 
    />
    
    <!-- 活动列表 -->
    <view class="activity-section">
      <SectionTitle 
        title="活动" 
        subtitle="再想个名字"
        :show-arrow="true"
        @click="handleMoreActivities"
      />
      
      <view class="activity-list">
        <ActivityCard
          v-for="activity in activities"
          :key="activity.id"
          :activity="activity"
          @click-card="handleActivityDetail"
          @click-button="handleJoinActivity"
        />
      </view>
      
      <!-- 加载更多 -->
      <view v-if="hasMore" class="load-more" @click="loadMoreActivities">
        <text class="load-more-text">加载更多</text>
      </view>
      
      <!-- 没有更多 -->
      <view v-else-if="activities.length > 0" class="no-more">
        <text class="no-more-text">没有更多了</text>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view v-if="!loading && activities.length === 0" class="empty-state">
      <text class="empty-text">暂无活动</text>
    </view>
  </view>
</template>

<script>
import { getHomeData, joinActivity } from '@/api/activity'
import SearchBar from './components/SearchBar.vue'
import BannerSwiper from './components/BannerSwiper.vue'
import QuickEntry from './components/QuickEntry.vue'
import SectionTitle from './components/SectionTitle.vue'
import ActivityCard from './components/ActivityCard.vue'

export default {
  components: {
    SearchBar,
    BannerSwiper,
    QuickEntry,
    SectionTitle,
    ActivityCard
  },
  
  data() {
    return {
      banners: [],
      quickEntries: [],
      activities: [],
      loading: false,
      hasMore: true,
      page: 1,
      pageSize: 10
    }
  },
  
  onLoad() {
    this.loadHomeData()
  },
  
  onPullDownRefresh() {
    this.page = 1
    this.hasMore = true
    this.loadHomeData().then(() => {
      uni.stopPullDownRefresh()
    })
  },
  
  onReachBottom() {
    if (this.hasMore && !this.loading) {
      this.loadMoreActivities()
    }
  },
  
  methods: {
    // 加载首页数据
    async loadHomeData() {
      try {
        this.loading = true
        const res = await getHomeData()
        
        if (res.code === 200) {
          this.banners = res.data.banners || []
          this.quickEntries = res.data.quickEntries || []
          this.activities = res.data.activities || []
          this.hasMore = res.data.hasMore || false
        }
      } catch (error) {
        console.error('加载首页数据失败:', error)
        uni.showToast({
          title: '加载失败',
          icon: 'none'
        })
      } finally {
        this.loading = false
      }
    },
    
    // 加载更多活动
    async loadMoreActivities() {
      if (this.loading || !this.hasMore) return
      
      try {
        this.loading = true
        this.page++
        
        const res = await getActivities({
          page: this.page,
          pageSize: this.pageSize
        })
        
        if (res.code === 200) {
          this.activities = [...this.activities, ...res.data.list]
          this.hasMore = res.data.hasMore
        }
      } catch (error) {
        console.error('加载更多失败:', error)
        this.page--
      } finally {
        this.loading = false
      }
    },
    
    // 搜索
    handleSearch() {
      uni.navigateTo({
        url: '/pages/search/search'
      })
    },
    
    // 横幅点击
    handleBannerClick({ banner }) {
      if (banner.link) {
        uni.navigateTo({
          url: banner.link
        })
      }
    },
    
    // 快捷入口点击
    handleEntryClick(entry) {
      if (entry.path) {
        uni.navigateTo({
          url: entry.path
        })
      }
    },
    
    // 查看更多活动
    handleMoreActivities() {
      uni.navigateTo({
        url: '/pages/activity/list'
      })
    },
    
    // 活动详情
    handleActivityDetail(activity) {
      uni.navigateTo({
        url: `/pages/activity/detail?id=${activity.id}`
      })
    },
    
    // 报名活动
    async handleJoinActivity(activity) {
      if (activity.status === 'ended') {
        uni.showToast({
          title: '活动已结束',
          icon: 'none'
        })
        return
      }
      
      try {
        const res = await joinActivity(activity.id)
        
        if (res.code === 200) {
          uni.showToast({
            title: '报名成功',
            icon: 'success'
          })
          // 刷新数据
          this.loadHomeData()
        }
      } catch (error) {
        uni.showToast({
          title: error.message || '报名失败',
          icon: 'none'
        })
      }
    }
  }
}
</script>

<style lang="scss" scoped>
.home-page {
  min-height: 100vh;
  background-color: #F5F6FA;
  padding-bottom: 100rpx;
}

.activity-section {
  margin-top: 32rpx;
}

.activity-list {
  display: flex;
  flex-direction: column;
}

.load-more,
.no-more {
  padding: 32rpx;
  text-align: center;
}

.load-more-text,
.no-more-text {
  font-size: 28rpx;
  color: #a7abb2;
  line-height: 40rpx;
}

.empty-state {
  padding: 200rpx 32rpx;
  text-align: center;
}

.empty-text {
  font-size: 28rpx;
  color: #a7abb2;
  line-height: 40rpx;
}
</style>
```

---

## 数据模型文件

**文件**: `data/home.js`

```javascript
/**
 * 首页数据模型
 */

// 轮播横幅数据
export const banners = [
  {
    id: 1,
    image: '/static/images/home/banner/banner1.jpg',
    title: 'Banner title',
    subtitle: '查找活动，支持提醒查找',
    link: '/pages/activity/list'
  }
]

// 快捷入口数据
export const quickEntries = [
  {
    id: 1,
    icon: '/static/images/home/icons/checkin.png',
    title: '活动签到',
    path: '/pages/checkin/checkin',
    badge: ''
  },
  {
    id: 2,
    icon: '/static/images/home/icons/cooperation.png',
    title: '业务合作',
    path: '/pages/cooperation/cooperation',
    badge: ''
  },
  {
    id: 3,
    icon: '/static/images/home/icons/points.png',
    title: '积分商城',
    path: '/pages/points/points',
    badge: 'NEW'
  }
]

// 活动列表数据
export const activities = [
  {
    id: 1,
    image: '/static/images/home/activities/activity1.jpg',
    title: '案例收集',
    startDate: '2025.01.01',
    endDate: '2025.12.31',
    status: 'ongoing',
    participants: 128,
    maxParticipants: 200
  }
]

// 首页完整数据
export const homeData = {
  banners,
  quickEntries,
  activities
}

export default homeData
```

---

## API接口文件

**文件**: `api/activity.js`

```javascript
import request from '@/utils/request'

/**
 * 获取首页数据
 */
export function getHomeData() {
  return request({
    url: '/api/home/data',
    method: 'get'
  })
}

/**
 * 获取活动列表
 */
export function getActivities(params) {
  return request({
    url: '/api/activities',
    method: 'get',
    params
  })
}

/**
 * 报名活动
 */
export function joinActivity(activityId) {
  return request({
    url: `/api/activities/${activityId}/join`,
    method: 'post'
  })
}
```

---

## 样式变量文件

**文件**: `styles/variables.scss`

```scss
// 颜色变量
$brand-blue: #4458ff;
$assist-blue: #1386ff;
$assist-red: #f34545;
$assist-orange: #ff7437;
$assist-yellow: #ff9317;
$success-green: #0fbc91;

$bg-color: #F5F6FA;
$divider-color: #E5E6EA;
$border-color: #D8D9DC;
$card-bg: #FFFFFF;

$text-title: #17171a;
$text-body: #656a73;
$text-secondary: #a7abb2;

// 间距变量
$spacing-1: 8rpx;
$spacing-2: 16rpx;
$spacing-3: 24rpx;
$spacing-4: 32rpx;

// 字体大小
$font-t1: 48rpx;
$font-t2: 36rpx;
$font-t3: 32rpx;
$font-t4: 28rpx;
$font-t5: 24rpx;
$font-t6: 20rpx;

// 圆角
$radius-small: 8rpx;
$radius-medium: 16rpx;
$radius-large: 32rpx;
```

完整实现完成！