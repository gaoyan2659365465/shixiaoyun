# 项目开发任务列表（4 个月交付节奏）

> 说明：本任务列表按「正常开发顺序」排列，适用于 4 个月左右的交付周期（实际可根据人力并行调整）。可粗略理解为：
> - 前 1~2 月：需求澄清 + 架构设计 & 后端基础骨架 + 账号登录 & 积分基础模型
> - 第 3 月：小程序端主要功能 + 后台管理主要功能
> - 第 4 月：对接 CRM / 支付 & 抽奖等增强功能 + 联调测试 + 上线与文档交付
>
> 每一条任务都包含：目标、主要工作内容、产出物、注意事项，便于你真实落地执行。

---

## 1. 需求澄清与范围界定

### 1.1 需求评审与范围确认
- **目标**：确认《需求.md》中所有功能的优先级和是否在本期（4 个月）全部实现，形成「本期范围」与「后续优化」清单。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 与业务方逐条过一遍《需求.md》，确认：
    - 本期必须实现（MUST）
    - 建议实现（SHOULD）
    - 可延后优化（LATER）
  - 重点确认：
    - CRM 对接范围（只识别老客户？是否需要在后台手动导入/同步？）
    - 支付/提现场景：是否立刻上生产支付，还是先对接沙箱环境。
    - 社区内容策略：是否采用预审核/事后审核、敏感词处理方式（拒绝发布 / 局部屏蔽）、是否支持用户举报。
  - 输出「需求澄清会议纪要」。
- **产出物**：
  - 《需求范围确认表》（标出 MUST/SHOULD/LATER）。
  - 《接口与第三方系统清单草案》（列出：CRM、mall.wisualarm.com、微信支付/提现、消息推送等）。
- **注意事项**：
  - 能砍掉或弱化的非刚需功能，尽量放到 LATER，保证 4 个月内能上线一个可用版本。

### 1.2 产品原型与页面流程图
- **目标**：将需求转成可视化原型，统一认知，减少返工。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 绘制小程序端原型：
    - tab 结构（我的 / 发现 / 商城）。
    - 登录注册、个人信息、我的积分、赚积分、任务详情、签到、抽奖、积分商城等页面。
  - 绘制后台管理系统原型：
    - 登录 / 账号管理。
    - 积分商城管理、兑换记录、提现记录。
    - 任务列表、任务模板、规则配置、任务审核列表。
  - 梳理用户主流程：
    - 新用户注册 → 做任务 → 获得积分 → 积分兑换礼品/红包。
    - 老客户（CRM 标记）→ 专属任务 → 额外积分。
- **产出物**：
  - 《小程序端页面原型》
  - 《后台管理系统页面原型》
  - 《用户流程图》（可选）
- **注意事项**：
  - 原型中尽量标出关键字段（如每个页面的表单字段、列表字段）。

### 1.3 技术方案与总体架构设计
- **目标**：在不超出 4 个月交付周期的前提下，确定整体技术栈选型、系统分层与模块边界，为后续开发提供清晰的技术蓝图。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 确定整体架构形态：
    - 第一版采用「单体应用 + 领域分层」的 Spring Boot 架构，预留按模块拆分为微服务的空间。
    - 前后端完全分离：小程序（uni-app）、管理后台（Vue3 + Element Plus）、后端 REST API。
  - 绘制系统总体架构图：
    - 客户端层：微信小程序 + 后台管理 Web。
    - 网关/访问层：Nginx/反向代理、HTTPS、域名规划。
    - 应用服务层：用户与权限、积分中心、任务中心、商城/礼品、支付与结算、CRM/第三方集成等逻辑模块。
    - 基础设施层：MySQL、Redis、RabbitMQ、对象存储（如有图片/视频上传）、日志/监控。
  - 明确定义后端分层规范：
    - Controller → Service → Repository（Mapper）→ Domain Model。
    - 统一异常处理与统一返回体规范（错误码、错误信息格式）。
    - DTO / VO 与 Entity 的转换规范（避免直接暴露数据库模型）。
  - 模块划分与边界约定：
    - **用户与权限模块**：用户、角色、权限、登录态、Token。
    - **积分中心模块**：积分账户、积分规则、积分流水。
    - **任务与模板模块**：任务配置、模板、任务提交、审核。
    - **社区内容模块**：帖子、评论、点赞、内容审核、敏感词过滤、举报处理。
    - **积分商城模块**：礼品、库存、兑换记录、提现记录、黑名单。
    - **支付与结算模块**：微信支付/提现对接、对账、风控预留。
    - **集成模块**：CRM、mall.wisualarm.com、消息推送（RabbitMQ）等。
  - 横切关注点设计：
    - 身份认证与授权方案（如基于 JWT 的 Token 方案）。
    - 日志规范（访问日志、业务日志、异常日志）与 traceId 方案。
    - 缓存策略（哪些接口/数据存 Redis，过期策略、缓存更新策略）。
    - 异步与消息队列使用场景（任务通知、积分发放异步化等）。
  - 可逆密码加密与敏感数据保护方案：
    - 选型对称加密算法（如 AES），并定义密钥管理方式（配置文件 + 环境变量）。
    - 规范密码加密/解密工具类的使用位置，禁止在业务代码中散落实现。
    - 标注需要脱敏存储/展示的字段（手机号、邮箱等）。
- **产出物**：
  - 《系统总体架构设计说明》（包含架构图、分层说明、技术栈列表）。
  - 《业务模块与接口分层设计文档》（列出每个模块的主要接口与边界）。
  - 《安全与加密设计说明》（特别是可逆密码方案）。
- **注意事项**：
  - 架构设计要结合团队规模与 4 个月周期，避免过度设计（优先单体 + 清晰分层）。
  - 提前与运维/部署环境确认 Redis、RabbitMQ、对象存储等基础设施是否可用，避免到后期才发现限制。

---

## 2. 数据库与后端基础工程搭建

### 2.1 数据库表结构设计
- **目标**：根据业务拆分出核心数据模型，保证积分、任务、账号等可扩展。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 设计核心表：
    - 用户表、用户扩展信息表、CRM 关联表
    - 角色/权限表（如后台管理员、运营账户）
    - 积分账户表、积分流水表
    - 任务表、任务模板表、任务提交记录表、任务审核记录表
    - 社区帖子表、评论表、点赞表、内容审核记录表、举报记录表、敏感词表（如采用审核/屏蔽机制）
    - 礼品/商品表、库存表、兑换记录表、提现记录表、黑名单表
  - 画出简要 ER 图，说明各表关系。
- **产出物**：
  - 《数据库设计文档（含 ER 图）》
  - 初版 SQL 建表脚本
- **注意事项**：
  - 积分流水、任务记录等表要提前考虑数据量（加索引）。

### 2.2 后端项目初始化
- **目标**：搭建可运行的 Spring Boot 工程，打通数据库与基础中间件。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 使用 Maven 创建基础项目结构，集成：
    - Spring Web、Spring Data / MyBatis-Plus
    - MySQL 驱动
    - Springdoc OpenAPI
    - Redis、RabbitMQ 依赖（可先配置基础连接）
  - 配置基础：
    - 多环境配置（dev / test / prod 占位）。
    - 数据源、MyBatis-Plus 基础配置。
  - 写一个简单的健康检查接口（如 `/health`）。
- **产出物**：
  - 可启动的后端项目骨架
  - OpenAPI 文档基础配置可访问
- **注意事项**：
  - 约定统一的日志规范（请求日志、异常日志）。

### 2.3 通用组件与基础能力
- **目标**：提供统一的工具和基础能力，避免后面重复造轮子。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 统一返回体、统一异常处理（全局异常处理器）。
  - 通用分页查询封装。
  - 登录用户上下文获取（如 ThreadLocal / 拦截器）。
  - 密码加密/解密工具封装（满足可逆要求）。
- **产出物**：
  - 基础工具类与通用响应封装代码
  - 加密方案说明文档（简单文字说明即可）
- **注意事项**：
  - 加密算法与密钥管理要记录在文档中，交付时一并说明。

---

## 3. 账号体系与登录注册模块

### 3.1 用户与权限模型实现
- **目标**：建立统一的用户体系，支持小程序端用户与后台管理账号。
- **预估时间**：约 4 个工作日。
- **主要工作内容**：
  - 实现用户实体、DAO、Service 层。
  - 区分普通用户与后台管理员角色。
  - 设计并实现简单的权限控制（如基于角色的接口访问控制）。
- **产出物**：
  - 用户相关后端接口（CRUD + 基本查询）
  - 权限模型实现代码
- **注意事项**：
  - 后期可接入更完善的权限框架（如 Spring Security），本期可先简化。

### 3.2 登录/注册/安全中心接口
- **目标**：支持手机号快捷登录、验证码登录、微信登录，以及密码修改。
- **预估时间**：约 5 个工作日。
- **主要工作内容**：
  - 注册接口：
    - 接收昵称、邮箱、手机号、邮箱验证码、密码。
  - 登录接口：
    - 手机号+密码登录。
    - 手机号+短信验证码登录。
    - 微信登录（预留 openId/unionId 字段，先接入测试环境）。
  - 密码修改与重置接口。
  - 隐私协议、服务协议的内容通过配置或 CMS 管理（此处可先写死或从配置读取）。
- **产出物**：
  - 账号与登录相关 API 文档
  - 已通过 Postman / 接口测试的后端接口
- **注意事项**：
  - 登录态建议使用 Token（如 JWT），统一封装验证逻辑。

### 3.3 CRM 绑定能力
- **目标**：能将小程序用户与 CRM 中的老客户记录关联起来，用于专属任务等。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 设计 CRM 关联表结构（如 `user_crm_mapping`）。
  - 约定 CRM 标识字段（如客户号、手机号等）。
  - 实现后台导入/同步接口（可先实现 CSV 导入或简单 HTTP 接口对接）。
- **产出物**：
  - CRM 关联接口或导入功能
  - CRM 同步/导入使用说明
- **注意事项**：
  - 如四个月内 CRM 不能完全对接，可至少支持「手动导入老客户清单」。

---

## 4. 积分体系核心实现

### 4.1 积分账户与流水
- **目标**：实现稳定可靠的积分账户体系，可记录每一笔变动。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 实现积分账户表、积分流水表的操作。
  - 封装统一的加减积分服务（包含幂等与事务控制）。
  - 定义积分变动类型（签到、任务奖励、兑换消耗、抽奖消耗/奖励等）。
- **产出物**：
  - 积分账户服务代码
  - 积分变动类型枚举及文档
- **注意事项**：
  - 积分加减必须在事务中完成，避免并发问题。

### 4.2 签到积分
- **目标**：实现每日签到获取积分的功能。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 设计签到记录表结构（用户、日期、积分数等）。
  - 后端接口：签到、查询签到记录、查询当天是否已签到。
  - 简单的规则配置（如每天固定积分、连续签到奖励可放到后期）。
- **产出物**：
  - 签到相关接口与文档
  - 签到规则配置说明

### 4.3 任务积分
- **目标**：支持限时任务、新手任务、专属客户任务及其积分发放逻辑。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 实现任务定义与任务模板基础结构。
  - 任务参与入口：统一任务列表接口 + 广告位/滚动栏数据接口。
  - 任务提交记录保存（问卷、截图、视频等以 URL 或文件 ID 形式存储）。
  - 审核通过后发放积分的服务逻辑（与 任务积分审核 模块联动）。
- **产出物**：
  - 任务相关后端接口
  - 任务与积分发放流程说明

---

## 5. 小程序前端开发

### 5.1 前端工程初始化
- **目标**：使用 uni-app 建立小程序工程与基本框架。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 创建 uni-app 项目，配置微信小程序目标平台。
  - 搭建基础目录结构（pages、components、store、utils 等）。
  - 封装统一的接口请求工具、Token 处理、错误提示等。
- **产出物**：
  - 可运行的基础小程序项目
  - 与后端健康检查接口打通

### 5.2 全局导航与基础页面
- **目标**：实现底部 Tab（我的 / 发现 / 商城）和基础路由。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 配置 TabBar。
  - 我的页、发现页、商城页的基础容器页面。
  - 游客模式访问控制（某些操作引导到登录页）。
- **产出物**：
  - Tab 结构正常工作的小程序

### 5.3 我的页相关功能
- **目标**：实现登录、注册、个人信息、密码修改等交互。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 登录/注册页面 UI 与接口对接。
  - 个人信息展示与编辑。
  - 安全中心页面（修改密码）。
  - 协议勾选与展示页面。
- **产出物**：
  - 我的页完整流程（登录→查看/编辑资料→安全设置）

### 5.4 发现页与社区/活动
- **目标**：实现发现页顶部 Tab（活动/社区），完成社区内容的浏览、发帖、评论、点赞与分享等核心功能。
- **预估时间**：约 1.5 周（7~10 个工作日）。
- **主要工作内容**：
  - 社区列表页：按「官方咨询 / 产品建议 / 新品测评 / 好物分享」分类展示，支持分页/下拉加载，展示标题、摘要、作者、时间、点赞数、评论数。
  - 帖子详情页：展示全文、图片/视频、评论列表，支持点赞/取消点赞、发表评论。
  - 发帖流程：登录用户可选择板块、编辑标题与正文、上传图片/视频（限制数量与大小），提交后显示发布状态（待审核/已发布）。
  - 我的内容：提供「我的帖子」「我的评论」入口，便于用户查看和管理自己的发言。
  - 内容状态展示：对已被后台屏蔽/下架的帖子，在前端显示「内容已被管理员下架」等提示。
  - 视频内容分享：支持将帖子/视频分享到好友、群聊、朋友圈（调用微信小程序分享能力）。
  - 活动列表页：展示任务与活动入口，可跳转至对应任务详情/活动页面。
- **产出物**：
  - 发现页及社区相关页面的前端实现与交互流程

### 5.5 积分相关前端页面
- **目标**：实现“我的积分”“赚积分”“任务详情”“签到”等页面。
- **预估时间**：约 5 个工作日。
- **主要工作内容**：
  - 我的积分页：展示积分总数、流水、兑换记录。
  - 赚积分页：展示任务列表、签到入口。
  - 签到页面：签到控件与结果提示。
  - 任务详情页：根据任务类型展示不同说明及提交方式。
- **产出物**：
  - 积分相关前端功能与页面

### 5.6 商城嵌入
- **目标**：在“商城”Tab 中嵌入 `mall.wisualarm.com`。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 使用 WebView 组件或微信开放能力嵌入外部站点。
  - 与账号/积分等对接（根据后端/第三方接口设计，可能需要携带 Token/参数）。
- **产出物**：
  - 可正常访问并操作的商城页

---

## 6. 后台管理系统开发

### 6.1 后台前端工程搭建
- **目标**：搭建 Web 管理端（如 Vue3 + Element Plus）。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 初始化项目结构，配置路由、权限控制（登录态）。
  - 公共布局（菜单、头部、内容区域）。
- **产出物**：
  - 可登录的后台管理框架

### 6.2 积分商城管理模块
- **目标**：提供运营人员维护礼品、查看数据的界面。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 数据统计页：展示参与任务账户数、时间维度统计、任务参与排行。
  - 礼品/商品管理：新增/编辑/上下架、配置所需积分、库存、图片、卡号/卡密等。
  - 兑换记录列表：支持查询、导出。
  - 提现记录列表：展示微信提现记录、对公账户对账信息（至少保留必要字段）。
- **产出物**：
  - 积分商城管理前端页面，与后端接口联调通过

### 6.3 任务与审核管理模块
- **目标**：实现任务配置与审核流程的后台管理。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 任务列表：查看全部任务、状态（上线/下线）、任务类型。
  - 任务模板库：可选模板创建任务（培训、签到、问卷等）。
  - 任务条件配置：次数限制、限定客户、新用户/指定客户群、任务时间等。
  - 任务审核列表：查看用户提交内容（问卷链接、截图、视频地址），支持审核通过/驳回。
  - 自动审核规则配置（如签到类任务自动通过）。
- **产出物**：
  - 任务与审核管理前端页面

### 6.4 积分规则设置模块
- **目标**：支持运营调整积分规则。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 配置不同任务类型的积分值。
  - 配置签到积分规则。
  - 预留接口给后端拉取并缓存规则。
- **产出物**：
  - 积分规则管理页面

### 6.5 社区内容管理模块
- **目标**：为运营提供社区内容审核、下架、置顶及敏感词管理的能力。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 社区帖子管理列表：按板块、状态、关键词、用户等筛选帖子，支持分页。
  - 帖子详情与审核：查看帖子正文、图片/视频、评论概要，执行审核通过/驳回（填写原因）。
  - 发布后管理：对已发布帖子进行删除、屏蔽、置顶、取消置顶等操作。
  - 用户举报处理（如一期内实现）：查看举报列表，快速定位被举报帖子/评论并处理。
  - 敏感词管理：维护敏感词库（增删查）、支持批量导入导出。
- **产出物**：
  - 社区内容管理前端页面，与后端审核/敏感词等接口联调通过

---

## 7. 支付、提现与对账、抽奖功能

### 7.1 微信支付/提现与对公账户对接
- **目标**：实现积分兑换为红包、微信提现的闭环，支持对账。
- **预估时间**：约 1.5 周（7~10 个工作日）。
- **主要工作内容**：
  - 了解并接入微信支付/企业付款到零钱/对公账户相关接口（可先接沙箱）。
  - 设计兑换红包流程：用户发起兑换 → 审核（如有） → 调用支付接口 → 更新记录。
  - 记录必要的对账字段（交易号、金额、时间、状态、失败原因等）。
- **产出物**：
  - 支付/提现相关后端服务与接口
  - 简单的《支付与对账说明》文档

### 7.2 大转盘抽奖功能
- **目标**：实现大转盘抽奖逻辑，支持积分、优惠券、红包等奖品。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 设计抽奖配置表：奖品类型、概率、库存、所需积分等。
  - 后端抽奖算法实现（确保概率合理，避免超发）。
  - 前端大转盘 UI 与动画。
  - 抽奖记录表与积分扣减/发放逻辑。
- **产出物**：
  - 抽奖服务与前端页面

---

## 8. 集成、联调与测试

### 8.1 接口联调
- **目标**：确保前后端各模块正常协同工作。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 小程序端与后端接口联调（登录、积分、任务、签到、商城、抽奖等）。
  - 后台管理端与后端接口联调（任务配置、审核、数据统计等）。
- **产出物**：
  - 联调记录表（列出接口与状态）

### 8.2 自测与功能测试
- **目标**：覆盖核心业务流程的功能测试，减少线上 bug。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 编写关键接口的单元测试（后端）。
  - 编写基本 UI 自测用例（前端走主流程）。
  - 回归测试：新用户主流程、老客户专属任务流程、积分兑换/抽奖流程。
- **产出物**：
  - 测试用例清单
  - 缺陷列表与修复记录

### 8.3 性能与安全检查（简版）
- **目标**：确保在合理并发下系统可用，并避免明显的安全问题。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 针对关键接口（登录、积分变更、抽奖）做简单压测。
  - 安全检查：
    - SQL 注入、XSS 基础防护。
    - 密码加密存储验证。
- **产出物**：
  - 简单《性能与安全测试记录》

---

## 9. 上线准备与交付

### 9.1 部署方案与环境准备
- **目标**：准备可上线的部署方案与环境。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 明确部署环境（服务器、域名、证书、Redis/RabbitMQ 部署方式等）。
  - 编写部署脚本或部署说明（如 Docker Compose 或手工部署步骤）。
- **产出物**：
  - 《部署说明文档》

### 9.2 微信小程序上线流程
- **目标**：完成小程序的提审与上线发布。
- **预估时间**：约 3 个工作日。
- **主要工作内容**：
  - 配置小程序信息、服务器域名白名单。
  - 完成微信小程序提审材料（功能说明、测试账号等）。
- **产出物**：
  - 上线后的版本记录与账号信息

### 9.3 文档与交接
- **目标**：保证后续维护和二次开发有足够资料。
- **预估时间**：约 1 周。
- **主要工作内容**：
  - 补充/整理：
    - 《需求.md》（更新为最终实现版本）
    - 《接口文档》（OpenAPI 导出 + 人工补充说明）
    - 《数据库设计说明》
    - 《加密与密码逆向方案说明》
    - 《运维与监控建议》（如日志查看方法等）
- **产出物**：
  - 完整项目文档包，交付给业务/运维/后续开发

