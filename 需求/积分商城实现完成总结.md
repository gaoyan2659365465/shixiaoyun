# 积分商城功能实现总结

## 1. 功能概述

积分商城是为用户提供使用积分兑换商品或服务的平台。用户可以通过完成特定任务（如签到、消费等）获取积分，并在商城中浏览和兑换心仪的商品。

### 主要特点

- **用户积分展示**：清晰展示用户当前的总积分。
- **商品分类筛选**：支持按不同商品分类进行筛选，方便用户查找。
- **商品列表**：以卡片形式展示商品，包含商品图片、名称、所需积分等信息。
- **响应式布局**：适配不同屏幕尺寸，提供良好的用户体验。
- **模块化组件**：功能被拆分为独立的、可复用的组件，便于维护和扩展。

## 2. 页面结构

积分商城页面 ([`pages/points/points.vue`](pages/points/points.vue:1)) 主要由以下几个部分组成：

1.  **用户积分卡片 (UserPointsCard)**：位于页面顶部，用于显示用户的当前积分信息。
2.  **筛选栏 (FilterBar)**：位于积分卡片下方，提供商品分类筛选功能。
3.  **商品列表 (PointsProductList)**：占据页面的主要区域，用于展示所有可兑换的商品。

```vue
<!-- pages/points/points.vue -->
<template>
  <view class="points-mall-page">
    <!-- 用户积分信息卡片 -->
    <UserPointsCard :points="userPoints" />

    <!-- 分类筛选栏 -->
    <FilterBar :categories="categories" @change="onCategoryChange" />

    <!-- 商品列表 -->
    <view class="product-list">
      <PointsProductCard 
        v-for="product in products" 
        :key="product.id" 
        :product="product"
      />
    </view>
  </view>
</template>
```

## 3. 组件说明

### 3.1 用户积分卡片 (`UserPointsCard.vue`)

-   **路径**：[`pages/points/components/UserPointsCard.vue`](pages/points/components/UserPointsCard.vue:1)
-   **功能**：展示用户的总积分。接收一个 `points` 属性作为输入。

### 3.2 筛选栏 (`FilterBar.vue`)

-   **路径**：[`pages/points/components/FilterBar.vue`](pages/points/components/FilterBar.vue:1)
-   **功能**：提供商品分类筛选。接收 `categories` 数组作为分类列表，并在用户切换分类时触发 `change` 事件。

### 3.3 商品卡片 (`PointsProductCard.vue`)

-   **路径**：[`pages/points/components/PointsProductCard.vue`](pages/points/components/PointsProductCard.vue:1)
-   **功能**：以卡片形式展示单个积分商品的信息，包括商品图、名称、兑换所需积分。接收一个 `product` 对象作为数据源。

## 4. 数据模型

### 4.1 商品数据 (`points.js`)

-   **路径**：[`data/points.js`](data/points.js:1)
-   **说明**：该文件模拟了从后端获取的积分商城商品数据。

```javascript
// data/points.js

export const products = [
  {
    id: 1,
    name: '精美笔记本',
    points: 1000,
    image: '/static/images/product1.jpg',
    category: '文具'
  },
  // ... more products
];

export const categories = ['全部', '文具', '生活用品', '电子产品'];
```

### 4.2 用户数据

用户积分数据通过API从后端获取，通常包含在用户个人信息中。

## 5. API接口

积分商城功能依赖以下API接口与后端进行数据交互。

### 5.1 获取用户积分

-   **接口**：`GET /api/user/points`
-   **功能**：获取当前登录用户的总积分。
-   **实现**：[`api/user.js`](api/user.js:1) (假设)

### 5.2 获取商品列表

-   **接口**：`GET /api/points/products`
-   **功能**：获取积分商城的所有商品列表，支持按分类筛选。
-   **参数**：`category` (可选)
-   **实现**：[`api/points.js`](api/points.js:1)

### 5.3 商品兑换

-   **接口**：`POST /api/points/exchange`
-   **功能**：用户使用积分兑换指定商品。
-   **参数**：`productId`, `quantity`
-   **实现**：[`api/points.js`](api/points.js:1)

## 6. 实现特点

- **数据驱动**：页面内容由 `data` 目录下的模拟数据或API获取的数据动态生成，便于管理和维护。
- **组件化开发**：将页面拆分为多个独立的UI组件，提高了代码的复用性和可维护性。
- **SCSS变量**：使用 SCSS 全局变量 ([`styles/variables.scss`](styles/variables.scss:1)) 统一管理颜色、字体大小等样式，方便实现主题切换和样式统一。
- **API模块化**：将所有API请求封装在 `api` 目录中，按模块划分，使接口管理更清晰。

## 7. 使用说明

1.  用户通过底部 TabBar 进入“积分商城”页面。
2.  页面顶部会显示用户当前的积分余额。
3.  用户可以通过点击筛选栏中的分类来查看不同类型的商品。
4.  浏览商品列表，点击感兴趣的商品卡片可进入商品详情页（待实现）或直接进行兑换。