{"version":3,"file":"request.js","sources":["utils/request.js"],"sourcesContent":["// 统一请求封装\nconst BASE_URL = 'http://localhost:8080/api'\n\nconst request = (options) => {\n  return new Promise((resolve, reject) => {\n    const token = uni.getStorageSync('token')\n\n    uni.request({\n      url: BASE_URL + options.url,\n      method: options.method || 'GET',\n      data: options.data || {},\n      header: {\n        'Content-Type': 'application/json',\n        'Authorization': token ? `Bearer ${token}` : '',\n        ...options.header\n      },\n      success: (res) => {\n        if (res.statusCode === 200) {\n          if (res.data.code === 200) {\n            resolve(res.data)\n          } else {\n            uni.showToast({\n              title: res.data.message || '请求失败',\n              icon: 'none'\n            })\n            reject(res.data)\n          }\n        } else {\n          uni.showToast({\n            title: '网络请求失败',\n            icon: 'none'\n          })\n          reject(res)\n        }\n      },\n      fail: (err) => {\n        uni.showToast({\n          title: '网络请求失败',\n          icon: 'none'\n        })\n        reject(err)\n      }\n    })\n  })\n}\n\nexport default request\n"],"names":["uni"],"mappings":";;AACA,MAAM,WAAW;AAEZ,MAAC,UAAU,CAAC,YAAY;AAC3B,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,UAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AAExCA,kBAAAA,MAAI,QAAQ;AAAA,MACV,KAAK,WAAW,QAAQ;AAAA,MACxB,QAAQ,QAAQ,UAAU;AAAA,MAC1B,MAAM,QAAQ,QAAQ,CAAE;AAAA,MACxB,QAAQ;AAAA,QACN,gBAAgB;AAAA,QAChB,iBAAiB,QAAQ,UAAU,KAAK,KAAK;AAAA,QAC7C,GAAG,QAAQ;AAAA,MACZ;AAAA,MACD,SAAS,CAAC,QAAQ;AAChB,YAAI,IAAI,eAAe,KAAK;AAC1B,cAAI,IAAI,KAAK,SAAS,KAAK;AACzB,oBAAQ,IAAI,IAAI;AAAA,UAC5B,OAAiB;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,IAAI,KAAK,WAAW;AAAA,cAC3B,MAAM;AAAA,YACpB,CAAa;AACD,mBAAO,IAAI,IAAI;AAAA,UAChB;AAAA,QACX,OAAe;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UAClB,CAAW;AACD,iBAAO,GAAG;AAAA,QACX;AAAA,MACF;AAAA,MACD,MAAM,CAAC,QAAQ;AACbA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAChB,CAAS;AACD,eAAO,GAAG;AAAA,MACX;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;;"}