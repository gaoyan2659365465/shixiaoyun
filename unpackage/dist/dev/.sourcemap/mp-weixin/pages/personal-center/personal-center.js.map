{"version":3,"file":"personal-center.js","sources":["pages/personal-center/personal-center.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGVyc29uYWwtY2VudGVyL3BlcnNvbmFsLWNlbnRlci52dWU"],"sourcesContent":["<template>\n\t<view class=\"personal-center\">\n\t\t<view class=\"header\">\n\t\t\t<text class=\"title\">个人中心</text>\n\t\t</view>\n\n\t\t<view class=\"content\">\n\t\t\t<view class=\"info-section\">\n\t\t\t\t<view class=\"info-item\" @tap=\"handleEdit('name')\">\n\t\t\t\t\t<text class=\"label\">姓名</text>\n\t\t\t\t\t<view class=\"value-wrapper\">\n\t\t\t\t\t\t<text class=\"value\">{{ userInfo.name || '未设置' }}</text>\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"info-item\" @tap=\"handleEdit('companyName')\">\n\t\t\t\t\t<text class=\"label\">公司名</text>\n\t\t\t\t\t<view class=\"value-wrapper\">\n\t\t\t\t\t\t<text class=\"value\">{{ userInfo.companyName || '未设置' }}</text>\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"info-item\" @tap=\"handleEdit('contact')\">\n\t\t\t\t\t<text class=\"label\">联系方式</text>\n\t\t\t\t\t<view class=\"value-wrapper\">\n\t\t\t\t\t\t<text class=\"value\">{{ userInfo.contact || '未设置' }}</text>\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"info-item\" @tap=\"handleEdit('crmCode')\">\n\t\t\t\t\t<text class=\"label\">CRM编码</text>\n\t\t\t\t\t<view class=\"value-wrapper\">\n\t\t\t\t\t\t<text class=\"value\">{{ userInfo.crmCode || '未设置' }}</text>\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 编辑弹窗 -->\n\t\t<view v-if=\"showEditModal\" class=\"modal-overlay\" @tap=\"closeModal\">\n\t\t\t<view class=\"modal-content\" @tap.stop>\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">编辑{{ editFieldLabel }}</text>\n\t\t\t\t\t<text class=\"modal-close\" @tap=\"closeModal\">×</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-body\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"modal-input\"\n\t\t\t\t\t\tv-model=\"editValue\"\n\t\t\t\t\t\t:placeholder=\"'请输入' + editFieldLabel\"\n\t\t\t\t\t\t:maxlength=\"editField === 'crmCode' ? 200 : (editField === 'companyName' ? 100 : 50)\"\n\t\t\t\t\t/>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-footer\">\n\t\t\t\t\t<button class=\"modal-btn cancel-btn\" @tap=\"closeModal\">取消</button>\n\t\t\t\t\t<button class=\"modal-btn confirm-btn\" @tap=\"saveEdit\">保存</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { storage } from '@/utils/storage.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: {},\n\t\t\tshowEditModal: false,\n\t\t\teditField: '',\n\t\t\teditFieldLabel: '',\n\t\t\teditValue: ''\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadUserInfo()\n\t},\n\tonShow() {\n\t\tthis.loadUserInfo()\n\t},\n\tmethods: {\n\t\tloadUserInfo() {\n\t\t\t// 从本地存储获取用户信息\n\t\t\tconst cachedUserInfo = storage.get('userInfo')\n\t\t\tif (cachedUserInfo) {\n\t\t\t\tthis.userInfo = cachedUserInfo\n\t\t\t}\n\t\t},\n\n\t\thandleEdit(field) {\n\t\t\tconst fieldLabels = {\n\t\t\t\tname: '姓名',\n\t\t\t\tcompanyName: '公司名',\n\t\t\t\tcontact: '联系方式',\n\t\t\t\tcrmCode: 'CRM编码'\n\t\t\t}\n\n\t\t\tthis.editField = field\n\t\t\tthis.editFieldLabel = fieldLabels[field]\n\t\t\tthis.editValue = this.userInfo[field] || ''\n\t\t\tthis.showEditModal = true\n\t\t},\n\n\t\tcloseModal() {\n\t\t\tthis.showEditModal = false\n\t\t\tthis.editField = ''\n\t\t\tthis.editFieldLabel = ''\n\t\t\tthis.editValue = ''\n\t\t},\n\n\t\tsaveEdit() {\n\t\t\t// 验证输入\n\t\t\tif (!this.editValue.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: `请输入${this.editFieldLabel}`,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// 更新用户信息\n\t\t\tthis.userInfo[this.editField] = this.editValue.trim()\n\n\t\t\t// 保存到本地存储\n\t\t\tstorage.set('userInfo', this.userInfo)\n\n\t\t\t// TODO: 调用后端API保存到服务器\n\t\t\t// await userApi.updateProfile(this.userInfo)\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '保存成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\n\n\t\t\tthis.closeModal()\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables.scss';\n\n.personal-center {\n\tmin-height: 100vh;\n\tbackground-color: $bg-color;\n}\n\n.header {\n\tbackground-color: $card-bg;\n\tpadding: $spacing-3 $spacing-4;\n\tborder-bottom: 1rpx solid $divider-color;\n}\n\n.title {\n\tfont-size: $font-t2;\n\tcolor: $text-title;\n\tfont-weight: 600;\n}\n\n.content {\n\tpadding: $spacing-4;\n}\n\n.info-section {\n\tbackground-color: $card-bg;\n\tborder-radius: $radius-medium;\n\tpadding: 0 $spacing-4;\n}\n\n.info-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: $spacing-3 0;\n\tborder-bottom: 1rpx solid $divider-color;\n\tcursor: pointer;\n}\n\n.info-item:last-child {\n\tborder-bottom: none;\n}\n\n.info-item:active {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.label {\n\tfont-size: $font-t3;\n\tcolor: $text-body;\n}\n\n.value-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.value {\n\tfont-size: $font-t3;\n\tcolor: $text-title;\n\tfont-weight: 500;\n\tmargin-right: $spacing-2;\n}\n\n.arrow {\n\tfont-size: 40rpx;\n\tcolor: $text-secondary;\n}\n\n// 编辑弹窗样式\n.modal-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 1000;\n}\n\n.modal-content {\n\twidth: 600rpx;\n\tbackground-color: #FFFFFF;\n\tborder-radius: $radius-large;\n\toverflow: hidden;\n}\n\n.modal-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: $spacing-4;\n\tborder-bottom: 1rpx solid $divider-color;\n}\n\n.modal-title {\n\tfont-size: $font-t2;\n\tcolor: $text-title;\n\tfont-weight: 600;\n}\n\n.modal-close {\n\tfont-size: 48rpx;\n\tcolor: $text-secondary;\n\tline-height: 1;\n\tpadding: 0 $spacing-2;\n}\n\n.modal-body {\n\tpadding: $spacing-4;\n}\n\n.modal-input {\n\twidth: 100%;\n\theight: 88rpx;\n\tpadding: 0 $spacing-3;\n\tfont-size: $font-t3;\n\tborder: 1rpx solid $divider-color;\n\tborder-radius: $radius-small;\n\tbackground-color: $bg-color;\n}\n\n.modal-footer {\n\tdisplay: flex;\n\tborder-top: 1rpx solid $divider-color;\n}\n\n.modal-btn {\n\tflex: 1;\n\theight: 96rpx;\n\tfont-size: $font-t3;\n\tborder: none;\n\tborder-radius: 0;\n\tbackground-color: transparent;\n}\n\n.cancel-btn {\n\tcolor: $text-secondary;\n\tborder-right: 1rpx solid $divider-color;\n}\n\n.confirm-btn {\n\tcolor: $brand-blue;\n\tfont-weight: 600;\n}\n</style>\n","import MiniProgramPage from 'C:/Users/26593/Documents/HBuilderProjects/shixiaoyun/pages/personal-center/personal-center.vue'\nwx.createPage(MiniProgramPage)"],"names":["storage","uni"],"mappings":";;;AAkEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU,CAAE;AAAA,MACZ,eAAe;AAAA,MACf,WAAW;AAAA,MACX,gBAAgB;AAAA,MAChB,WAAW;AAAA,IACZ;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,aAAa;AAAA,EAClB;AAAA,EACD,SAAS;AACR,SAAK,aAAa;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AAEd,YAAM,iBAAiBA,cAAAA,QAAQ,IAAI,UAAU;AAC7C,UAAI,gBAAgB;AACnB,aAAK,WAAW;AAAA,MACjB;AAAA,IACA;AAAA,IAED,WAAW,OAAO;AACjB,YAAM,cAAc;AAAA,QACnB,MAAM;AAAA,QACN,aAAa;AAAA,QACb,SAAS;AAAA,QACT,SAAS;AAAA,MACV;AAEA,WAAK,YAAY;AACjB,WAAK,iBAAiB,YAAY,KAAK;AACvC,WAAK,YAAY,KAAK,SAAS,KAAK,KAAK;AACzC,WAAK,gBAAgB;AAAA,IACrB;AAAA,IAED,aAAa;AACZ,WAAK,gBAAgB;AACrB,WAAK,YAAY;AACjB,WAAK,iBAAiB;AACtB,WAAK,YAAY;AAAA,IACjB;AAAA,IAED,WAAW;AAEV,UAAI,CAAC,KAAK,UAAU,QAAQ;AAC3BC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,MAAM,KAAK,cAAc;AAAA,UAChC,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAGA,WAAK,SAAS,KAAK,SAAS,IAAI,KAAK,UAAU,KAAK;AAGpDD,oBAAAA,QAAQ,IAAI,YAAY,KAAK,QAAQ;AAKrCC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,OACN;AAED,WAAK,WAAW;AAAA,IACjB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1IA,GAAG,WAAW,eAAe;"}