{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"profile-container\">\r\n\t\t<!-- 用户信息卡片 -->\r\n\t\t<view class=\"user-card\">\r\n\t\t\t<view class=\"user-info\">\r\n\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatar || '/static/images/default-avatar.png'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"user-details\">\r\n\t\t\t\t\t<text class=\"username\">{{ userInfo.nickname || '未登录' }}</text>\r\n\t\t\t\t\t<text class=\"user-id\">ID: {{ userInfo.id || '---' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"user-stats\">\r\n\t\t\t\t<view class=\"stat-item\" @tap=\"goToPoints\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ userInfo.points || 0 }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">积分</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"stat-divider\"></view>\r\n\t\t\t\t<view class=\"stat-item\" @tap=\"goToCoupon\">\r\n\t\t\t\t\t<text class=\"stat-value\">{{ userInfo.couponCount || 0 }}</text>\r\n\t\t\t\t\t<text class=\"stat-label\">优惠券</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 功能菜单 -->\r\n\t\t<view class=\"section\">\r\n\t\t\t<view class=\"menu-list\">\r\n\t\t\t\t<view \r\n\t\t\t\t\tv-for=\"(item, index) in menuItems\" \r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"menu-item\"\r\n\t\t\t\t\t@tap=\"handleMenuClick(item)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"menu-left\">\r\n\t\t\t\t\t\t<image class=\"menu-icon\" :src=\"item.icon\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t<text class=\"menu-label\">{{ item.label }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"menu-right\">\r\n\t\t\t\t\t\t<text v-if=\"item.badge\" class=\"menu-badge\">{{ item.badge }}</text>\r\n\t\t\t\t\t\t<text class=\"arrow\">›</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 退出登录按钮 -->\r\n\t\t<view class=\"logout-section\" v-if=\"isLoggedIn\">\r\n\t\t\t<button class=\"logout-btn\" @tap=\"handleLogout\">退出登录</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { storage } from '@/utils/storage.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisLoggedIn: false,\r\n\t\t\tuserInfo: {},\r\n\t\t\tmenuItems: [\r\n\t\t\t\t{ label: '个人中心', icon: '/static/images/menu-profile.png', action: 'profile' },\r\n\t\t\t\t{ label: '客服中心', icon: '/static/images/menu-service.png', action: 'service' },\r\n\t\t\t\t{ label: '关于我们', icon: '/static/images/menu-about.png', action: 'about' }\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.checkLoginStatus()\r\n\t\tthis.loadUserInfo()\r\n\t},\r\n\tonShow() {\r\n\t\tthis.checkLoginStatus()\r\n\t\tif (this.isLoggedIn) {\r\n\t\t\tthis.loadUserInfo()\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tcheckLoginStatus() {\r\n\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\tthis.isLoggedIn = !!token\r\n\t\t\tif (!this.isLoggedIn) {\r\n\t\t\t\tthis.userInfo = {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tloadUserInfo() {\r\n\t\t\tif (!this.isLoggedIn) return\r\n\t\t\t\r\n\t\t\t// 从缓存获取用户信息\r\n\t\t\tconst cachedUserInfo = storage.get('userInfo')\r\n\t\t\tif (cachedUserInfo) {\r\n\t\t\t\tthis.userInfo = cachedUserInfo\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// TODO: 从服务器获取最新用户信息\r\n\t\t\tconsole.log('加载用户信息')\r\n\t\t},\r\n\t\thandleMenuClick(item) {\r\n\t\t\tif (!this.isLoggedIn && item.action !== 'about' && item.action !== 'service') {\r\n\t\t\t\tthis.goToLogin()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t// 处理菜单点击\r\n\t\t\tswitch (item.action) {\r\n\t\t\t\tcase 'profile':\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/personal-center/personal-center'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'service':\r\n\t\t\t\t\t// TODO: 跳转到客服中心\r\n\t\t\t\t\tconsole.log('跳转到客服中心')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'about':\r\n\t\t\t\t\t// TODO: 跳转到关于我们\r\n\t\t\t\t\tconsole.log('跳转到关于我们')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.log('未知操作:', item.action)\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoToLogin() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 跳转到积分商城\r\n\t\tgoToPoints() {\r\n\t\t\tif (!this.isLoggedIn) {\r\n\t\t\t\tthis.goToLogin()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/points/points'\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 跳转到卡券中心\r\n\t\tgoToCoupon() {\r\n\t\t\tif (!this.isLoggedIn) {\r\n\t\t\t\tthis.goToLogin()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/coupon/coupon'\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleLogout() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要退出登录吗？',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.removeStorageSync('token')\r\n\t\t\t\t\t\tstorage.remove('userInfo')\r\n\t\t\t\t\t\tthis.isLoggedIn = false\r\n\t\t\t\t\t\tthis.userInfo = {}\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已退出登录',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/variables.scss';\r\n\r\n.profile-container {\r\n\tmin-height: 100vh;\r\n\tbackground-color: $bg-color;\r\n\tpadding-bottom: 40rpx;\r\n}\r\n\r\n.user-card {\r\n\tbackground: linear-gradient(135deg, $brand-blue 0%, $assist-blue 100%);\r\n\tpadding: $spacing-4;\r\n\tmargin-bottom: $spacing-3;\r\n}\r\n\r\n.user-info {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmargin-bottom: $spacing-4;\r\n}\r\n\r\n.avatar {\r\n\twidth: 128rpx;\r\n\theight: 128rpx;\r\n\tborder-radius: $radius-circle;\r\n\tborder: 4rpx solid rgba(255, 255, 255, 0.3);\r\n\tmargin-right: $spacing-3;\r\n}\r\n\r\n.user-details {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n}\r\n\r\n.username {\r\n\tfont-size: $font-t2;\r\n\tcolor: #FFFFFF;\r\n\tfont-weight: 600;\r\n\tmargin-bottom: $spacing-1;\r\n}\r\n\r\n.user-id {\r\n\tfont-size: $font-t4;\r\n\tcolor: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.user-stats {\r\n\tdisplay: flex;\r\n\tbackground-color: rgba(255, 255, 255, 0.15);\r\n\tborder-radius: $radius-medium;\r\n\tpadding: $spacing-3 0;\r\n}\r\n\r\n.stat-item {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tcursor: pointer;\r\n\r\n\t&:active {\r\n\t\topacity: 0.7;\r\n\t}\r\n}\r\n\r\n.stat-value {\r\n\tfont-size: $font-t2;\r\n\tcolor: #FFFFFF;\r\n\tfont-weight: 600;\r\n\tmargin-bottom: $spacing-1;\r\n}\r\n\r\n.stat-label {\r\n\tfont-size: $font-t5;\r\n\tcolor: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.stat-divider {\r\n\twidth: 1rpx;\r\n\theight: 60rpx;\r\n\tbackground-color: rgba(255, 255, 255, 0.2);\r\n\talign-self: center;\r\n}\r\n\r\n.section {\r\n\tbackground-color: $card-bg;\r\n\tmargin-bottom: $spacing-3;\r\n}\r\n\r\n.arrow {\r\n\tfont-size: 40rpx;\r\n\tcolor: $text-secondary;\r\n\tmargin-left: 4rpx;\r\n}\r\n\r\n.menu-list {\r\n\tpadding: 0 $spacing-4;\r\n}\r\n\r\n.menu-item {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tpadding: $spacing-3 0;\r\n\tborder-bottom: 1rpx solid $divider-color;\r\n}\r\n\r\n.menu-item:last-child {\r\n\tborder-bottom: none;\r\n}\r\n\r\n.menu-left {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.menu-icon {\r\n\twidth: 40rpx;\r\n\theight: 40rpx;\r\n\tmargin-right: $spacing-3;\r\n}\r\n\r\n.menu-label {\r\n\tfont-size: $font-t3;\r\n\tcolor: $text-title;\r\n}\r\n\r\n.menu-right {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n}\r\n\r\n.menu-badge {\r\n\tfont-size: $font-t5;\r\n\tcolor: $assist-red;\r\n\tmargin-right: $spacing-2;\r\n}\r\n\r\n.logout-section {\r\n\tpadding: 0 $spacing-4;\r\n\tmargin-top: $spacing-4;\r\n}\r\n\r\n.logout-btn {\r\n\twidth: 100%;\r\n\theight: 88rpx;\r\n\tbackground-color: $card-bg;\r\n\tcolor: $text-title;\r\n\tfont-size: $font-t3;\r\n\tborder-radius: $radius-medium;\r\n\tborder: 1rpx solid $divider-color;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/26593/Documents/HBuilderProjects/shixiaoyun/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","storage"],"mappings":";;;AAuDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,UAAU,CAAE;AAAA,MACZ,WAAW;AAAA,QACV,EAAE,OAAO,QAAQ,MAAM,mCAAmC,QAAQ,UAAW;AAAA,QAC7E,EAAE,OAAO,QAAQ,MAAM,mCAAmC,QAAQ,UAAW;AAAA,QAC7E,EAAE,OAAO,QAAQ,MAAM,iCAAiC,QAAQ,QAAQ;AAAA,MACzE;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,iBAAiB;AACtB,SAAK,aAAa;AAAA,EAClB;AAAA,EACD,SAAS;AACR,SAAK,iBAAiB;AACtB,QAAI,KAAK,YAAY;AACpB,WAAK,aAAa;AAAA,IACnB;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,mBAAmB;AAClB,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,WAAK,aAAa,CAAC,CAAC;AACpB,UAAI,CAAC,KAAK,YAAY;AACrB,aAAK,WAAW,CAAC;AAAA,MAClB;AAAA,IACA;AAAA,IACD,eAAe;AACd,UAAI,CAAC,KAAK;AAAY;AAGtB,YAAM,iBAAiBC,cAAAA,QAAQ,IAAI,UAAU;AAC7C,UAAI,gBAAgB;AACnB,aAAK,WAAW;AAAA,MACjB;AAGAD,oBAAAA,MAAY,MAAA,OAAA,mCAAA,QAAQ;AAAA,IACpB;AAAA,IACD,gBAAgB,MAAM;AACrB,UAAI,CAAC,KAAK,cAAc,KAAK,WAAW,WAAW,KAAK,WAAW,WAAW;AAC7E,aAAK,UAAU;AACf;AAAA,MACD;AAGA,cAAQ,KAAK,QAAM;AAAA,QAClB,KAAK;AACJA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK;AAAA,WACL;AACD;AAAA,QACD,KAAK;AAEJA,wBAAAA,uDAAY,SAAS;AACrB;AAAA,QACD,KAAK;AAEJA,wBAAAA,uDAAY,SAAS;AACrB;AAAA,QACD;AACCA,wBAAA,MAAA,MAAA,OAAA,oCAAY,SAAS,KAAK,MAAM;AAAA,MAClC;AAAA,IACA;AAAA,IACD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAED,aAAa;AACZ,UAAI,CAAC,KAAK,YAAY;AACrB,aAAK,UAAU;AACf;AAAA,MACD;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAED,aAAa;AACZ,UAAI,CAAC,KAAK,YAAY;AACrB,aAAK,UAAU;AACf;AAAA,MACD;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBA,0BAAG,MAAC,kBAAkB,OAAO;AAC7BC,0BAAO,QAAC,OAAO,UAAU;AACzB,iBAAK,aAAa;AAClB,iBAAK,WAAW,CAAC;AACjBD,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AAAA,UACF;AAAA,QACD;AAAA,OACA;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrKA,GAAG,WAAW,eAAe;"}